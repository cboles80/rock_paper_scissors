<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game - Rock, Paper, Scissors</title>
</head>

<body>

    <script>
        /* 
Plays rock, paper, scissors against the computer.
Modify the existing code to incorporate the below options.
-Play a match of 5 rounds.
-Keep and display score.
*/


        console.log('Ready...');
        const numGames = 1;
        let numOfTieGames = 0;
        let numOfPlayerWins = 0;
        let numOfComputerWins = 0;


        function getPlayerThrow(myGameNumber) {
            let playerSelection = window.prompt("GAME " + myGameNumber + "    Please choose rock, paper, or scissors:");
            playerSelection = playerSelection.toLowerCase();
            if (playerSelection != "rock" && playerSelection != "scissors" && playerSelection != "paper") {
                alert('That is not one of the choices.');
                getPlayerThrow(myGameNumber);
            } else { 
                return playerSelection;
            }
        }

        function getComputerThrow() {
            const randomSelection = Math.floor(Math.random() * 3);
            arrayChoices = ["rock", "paper", "scissors"];
            const computerSelection = arrayChoices[randomSelection];
            return computerSelection;
        }

        function getWinner(playerSelection, computerSelection) {
            //0=Tie, -1=Player, 1=Computer
            let myGameWinner = 0;
            if (playerSelection == computerSelection) {
                console.log("The game is a Tie!");
                numOfTieGames++;
            } else if ((playerSelection == "rock" && computerSelection == "scissors") ||
                (playerSelection == "scissors" && computerSelection == "paper") ||
                (playerSelection == "paper" && computerSelection == "rock")) {
                console.log("You Win! " + playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1) +
                    " beats " + computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1));
                numOfPlayerWins++;
                myGameWinner = -1;
            } else {
                console.log("You Lose! " + computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1) +
                    " beats " + playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1));
                numOfComputerWins++;
                myGameWinner = 1;
            }
            return myGameWinner;
        }

        function updateMatchScore(thisMatchScore, thisWinner) {
            console.log('Update Match Score');
            console.log(thisMatchScore[0]);
            console.log('thisWinner is; ', thisWinner);
            let myWins = '';
            switch (thisWinner) {
                case -1: 
                //Increment Player win by 1
                    myWins = thisMatchScore[0];
                    console.log('myWins: ', myWins);
                    thisMatchScore[0] = myWins++;
                    console.log('myWins: ', myWins);
                    console.log('Player Score: ', + thisMatchScore[0]);
                    break;
                
                case 0: 
                //Increment Ties by 1
                    myWins = thisMatchScore[1];
                    console.log('myWins: ', myWins);
                    thisMatchScore[1] = myWins++;
                    console.log('myWins: ', myWins);
                    console.log('Ties: ', + thisMatchScore[1]);
                    break;
                
                case 1: 
                //Increment Computer win by 1
                    myWins = thisMatchScore[2];
                    console.log('myWins: ', myWins);
                    thisMatchScore[2] = myWins++;
                    console.log('myWins: ', myWins);
                    console.log('Computer Score: ', + thisMatchScore[2]);
                    break;
            }
            return thisMatchScore;
        }

        function playMatch(matchGames) {
            let arMatchScore = [0, 0, 0];
            for (let i = 1; i <= matchGames; i++) {
                //Passing "i" because we used the game number in the prompt
                let myPlayerThrow = getPlayerThrow(i);
                console.log(myPlayerThrow);
                console.log("You chose " + myPlayerThrow.toUpperCase());
                let myComputerThrow = getComputerThrow();
                console.log("The computer chose " + myComputerThrow.toUpperCase());
                let myWinner = getWinner(myPlayerThrow, myComputerThrow);
                arMatchScore = updateMatchScore(arMatchScore, myWinner);
            }
            console.log('Tie Games: ' + numOfTieGames + ' / ' + arMatchScore[1]);
            console.log('Computer Games Won: ' + numOfComputerWins + ' / ' + arMatchScore[2]);
            console.log('Player Games Won: ' + numOfPlayerWins + ' / ' + arMatchScore[0]);
        }

        playMatch(numGames);
    </script>

</body>

</html>